# Xray Telegram Manager

ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¹ xray Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· Telegram Bot Ð´Ð»Ñ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð¾Ð² Keenetic. ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð»ÐµÐ³ÐºÐ¾ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒÑÑ Ð¼ÐµÐ¶Ð´Ñƒ xray ÑÐµÑ€Ð²ÐµÑ€Ð°Ð¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· Telegram Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ, Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¸Ð½Ð³ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸ÑÐ¼Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾.

> ðŸ“‹ **Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°**: ÑÐ¼. [INSTALL.md](INSTALL.md) Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- ðŸ¤– **Telegram Bot Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ** - ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸
- ðŸ”„ **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²** - Ð²Ñ‹Ð±Ð¾Ñ€ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²
- ðŸ“Š **Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¸Ð½Ð³Ð°** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ Ð²ÑÐµÑ… ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ñ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹
- ðŸ”— **ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¾Ðº** - Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ð¸Ð· base64 ÑÑÑ‹Ð»Ð¾Ðº
- âš¡ **ÐÐ²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº** - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ°Ðº ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²Ð¸Ñ
- ðŸ›¡ï¸ **Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ** - Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð°Ð´Ð¼Ð¸Ð½Ð°
- ðŸ“± **Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸** - ÑƒÐ´Ð¾Ð±Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· inline ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñƒ

## Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½Ð° Keenetic

### ÐœÐµÑ‚Ð¾Ð´ 1: Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾Ð´Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

```bash
# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
curl -fsSL https://raw.githubusercontent.com/ad/xray-subscription-telegram-manager-for-keenetic/main/scripts/quick-install.sh | sh

# Ð˜Ð»Ð¸ Ñ wget
wget -qO- https://raw.githubusercontent.com/ad/xray-subscription-telegram-manager-for-keenetic/main/scripts/quick-install.sh | sh

# ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± (ÐµÑÐ»Ð¸ pipe Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚)
wget https://raw.githubusercontent.com/ad/xray-subscription-telegram-manager-for-keenetic/main/scripts/quick-install.sh
chmod +x quick-install.sh && ./quick-install.sh
```

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:
```bash
nano /opt/etc/xray-manager/config.json
```

### ÐœÐµÑ‚Ð¾Ð´ 2: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸Ð· Ð°Ñ€Ñ…Ð¸Ð²Ð°

### ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

1. **Entware ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½** Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ðµ Keenetic
2. **SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿** Ðº Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ñƒ
3. **Xray ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½** Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ (Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð°ÐºÐµÑ‚ `xray-core`)

### Ð’Ñ‹Ð±Ð¾Ñ€ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹

Ð‘Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð¾ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð¾Ð² Keenetic Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ **mips-softfloat**. Ð•ÑÐ»Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹:

- **mips-softfloat** - Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð¾ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Keenetic (KN-1010, KN-1410, KN-1711, etc.)
- **mips-hardfloat** - Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±Ð¾Ð»ÐµÐµ Ð½Ð¾Ð²Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸
- **mipsle-softfloat** - Ñ€ÐµÐ´ÐºÐ¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ñ little-endian
- **mipsle-hardfloat** - Ð¾Ñ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸

Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð°:
```bash
ssh root@192.168.1.1 "uname -m && cat /proc/cpuinfo | grep cpu"
```

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

1. **Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ»Ð¸Ð·** Ñ GitHub:
   ```bash
   # ÐÑ€Ñ…Ð¸Ð² Ñ Ð±Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ð¼ Ñ„Ð°Ð¹Ð»Ð¾Ð¼ Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°Ð¼Ð¸ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
   wget https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases/latest/download/xray-telegram-manager-mips-softfloat.tar.gz
   
   # ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹:
   # wget https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases/latest/download/xray-telegram-manager-mips-hardfloat.tar.gz
   # wget https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases/latest/download/xray-telegram-manager-mipsle-softfloat.tar.gz
   # wget https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases/latest/download/xray-telegram-manager-mipsle-hardfloat.tar.gz
   ```

2. **Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ**:
   ```bash
   # ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð°Ñ€Ñ…Ð¸Ð² Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€
   scp -O xray-telegram-manager-mips-softfloat.tar.gz root@192.168.1.1:/tmp/
   
   # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ÑÑ Ðº Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ñƒ
   ssh root@192.168.1.1
   
   # Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ñ‹Ð²Ð°ÐµÐ¼ Ð°Ñ€Ñ…Ð¸Ð²
   cd /tmp
   tar -xzf xray-telegram-manager-mips-softfloat.tar.gz
   
   # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
   if [ -f scripts/install.sh ]; then
     ./scripts/install.sh
   else
     # Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
     mkdir -p /opt/etc/xray-manager/{logs,scripts}
     mkdir -p /opt/bin
     cp xray-telegram-manager /opt/bin/
     chmod +x /opt/bin/xray-telegram-manager
   fi
   ```

3. **Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ init ÑÐºÑ€Ð¸Ð¿Ñ‚** (ÐµÑÐ»Ð¸ Ð½Ðµ ÑÐ¾Ð·Ð´Ð°Ð»ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸):
   ```bash
   cat > /opt/etc/init.d/S99xray-telegram-manager << 'EOF'
#!/bin/sh

ENABLED=yes
PROCS=xray-telegram-manager
ARGS="-config /opt/etc/xray-manager/config.json"
PREARGS=""
DESC=$PROCS
PATH=/opt/sbin:/opt/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

. /opt/etc/init.d/rc.func
EOF
   
   chmod +x /opt/etc/init.d/S99xray-telegram-manager
   ```

4. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ**:
   ```bash
   nano /opt/etc/xray-manager/config.json
   ```
   
   Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ:
   - `admin_id` - Ð²Ð°Ñˆ Telegram ID (Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñƒ @userinfobot)
   - `bot_token` - Ñ‚Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð° Ð¾Ñ‚ @BotFather
   - `subscription_url` - ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð²Ð°ÑˆÑƒ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ VLESS

5. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸Ñ**:
   ```bash
   /opt/etc/init.d/S99xray-telegram-manager start
   ```

### ÐœÐµÑ‚Ð¾Ð´ 3: Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°

```bash
# Ð£Ð·Ð½Ð°Ð¹Ñ‚Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ Ð½Ð° https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases
# Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ v1.0.0 Ð½Ð° Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ
wget https://github.com/ad/xray-subscription-telegram-manager-for-keenetic/releases/download/v1.0.0/xray-telegram-manager-v1.0.0-mips-softfloat

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð½Ð° Ñ€Ð¾ÑƒÑ‚ÐµÑ€
scp -O xray-telegram-manager-v1.0.0-mips-softfloat root@192.168.1.1:/opt/bin/xray-telegram-manager
ssh root@192.168.1.1 "chmod +x /opt/bin/xray-telegram-manager"

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
ssh root@192.168.1.1 "mkdir -p /opt/etc/xray-manager/logs"
```

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Telegram Ð±Ð¾Ñ‚Ð°

1. ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ @BotFather Ð² Telegram
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ `/newbot`
3. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð±Ð¾Ñ‚Ð°
4. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
5. Ð£Ð·Ð½Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾Ð¹ Telegram ID Ñƒ @userinfobot

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ°
/opt/etc/init.d/S99xray-telegram-manager status

# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸
tail -f /opt/etc/xray-manager/logs/app.log

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
ps | grep xray-telegram-manager
```

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Telegram Ð±Ð¾Ñ‚Ð°

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð±Ð¾Ñ‚Ñƒ:

- `/start` - Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ð°
- `/list` - ÑÐ¿Ð¸ÑÐ¾Ðº Ð²ÑÐµÑ… Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²
- `/status` - Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑ
- `/ping` - Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¸Ð½Ð³Ð° Ð²ÑÐµÑ… ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²

## Ð ÑƒÑ‡Ð½Ð°Ñ ÑÐ±Ð¾Ñ€ÐºÐ° Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¸Ð· Ð¸ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¾Ð²

```bash
# ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐµÐ¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
git clone https://github.com/ad/xray-subscription-telegram-manager-for-keenetic.git
cd xray-subscription-telegram-manager-for-keenetic

# Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð´Ð»Ñ MIPS
make mips

# Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
./scripts/deploy.sh --target 192.168.1.1
```

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€

```bash
# MIPS softfloat (Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð¾ Keenetic)
make mips-softfloat

# MIPS hardfloat (Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸)
make mips-hardfloat

# Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°
make build
```

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ `/opt/etc/xray-manager/config.json`:

```json
{
    "admin_id": 123456789,
    "bot_token": "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",
    "config_path": "/opt/etc/xray/configs/04_outbounds.json",
    "subscription_url": "https://example.com/subscription.txt",
    "log_level": "info",
    "xray_restart_command": "/opt/etc/init.d/S24xray restart",
    "cache_duration": 3600,
    "health_check_interval": 300,
    "ping_timeout": 5
}
```

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸

- `admin_id` - **Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾** - Ð²Ð°Ñˆ Telegram ID
- `bot_token` - **Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾** - Ñ‚Ð¾ÐºÐµÐ½ Telegram Ð±Ð¾Ñ‚Ð°
- `subscription_url` - **Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾** - ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° base64 Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ VLESS
- `config_path` - Ð¿ÑƒÑ‚ÑŒ Ðº ÐºÐ¾Ð½Ñ„Ð¸Ð³Ñƒ xray (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: `/opt/etc/xray/configs/04_outbounds.json`)
- `log_level` - ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ: `debug`, `info`, `warn`, `error`
- `xray_restart_command` - ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° xray
- `cache_duration` - Ð²Ñ€ÐµÐ¼Ñ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸ Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…
- `health_check_interval` - Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ ÑÐµÑ€Ð²Ð¸ÑÐ°
- `ping_timeout` - Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ð¸Ð½Ð³Ð°

## Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð¼

```bash
# Ð—Ð°Ð¿ÑƒÑÐº
/opt/etc/init.d/S99xray-telegram-manager start

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
/opt/etc/init.d/S99xray-telegram-manager stop

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº
/opt/etc/init.d/S99xray-telegram-manager restart

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
/opt/etc/init.d/S99xray-telegram-manager status

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
/opt/etc/init.d/S99xray-telegram-manager enable

# ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
/opt/etc/init.d/S99xray-telegram-manager disable
```

## Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²

```bash
# ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð»Ð¾Ð³Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
tail -f /opt/etc/xray-manager/logs/app.log

# Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð»Ð¾Ð³Ð¸ (ÐµÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ systemd)
journalctl -u xray-telegram-manager -f
```

### Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

1. **Ð‘Ð¾Ñ‚ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð° Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ ÑÐµÑ€Ð²Ð¸Ñ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð°

2. **ÐžÑˆÐ¸Ð±ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ `admin_id` Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
   - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ð¹ ID Ñƒ @userinfobot

3. **ÐÐµ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ ÑÐµÑ€Ð²ÐµÑ€Ñ‹**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ `subscription_url`
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ ÑÑÑ‹Ð»ÐºÐ° ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ base64 Ð´Ð°Ð½Ð½Ñ‹Ðµ

4. **ÐÐµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÑŽÑ‚ÑÑ ÑÐµÑ€Ð²ÐµÑ€Ñ‹**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿ÑƒÑ‚ÑŒ Ðº ÐºÐ¾Ð½Ñ„Ð¸Ð³Ñƒ xray (`config_path`)
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° xray Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

5. **Ð‘Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ**:
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ: `uname -m && cat /proc/cpuinfo | grep cpu`
   - ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ³ÑƒÑŽ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ (mips-hardfloat, mipsle-softfloat, mipsle-hardfloat)
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ñ„Ð°Ð¹Ð» Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹: `chmod +x /opt/bin/xray-telegram-manager`
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸: `ldd /opt/bin/xray-telegram-manager`

6. **ÐžÑˆÐ¸Ð±ÐºÐ° "No such file or directory" Ð¿Ñ€Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐµ**:
   - Ð§Ð°ÑÑ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ
   - ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ: `file /opt/bin/xray-telegram-manager` Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ‚Ð¸Ð¿Ð° Ñ„Ð°Ð¹Ð»Ð°

### ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²Ð¸Ñ
/opt/etc/xray-manager/scripts/uninstall.sh

# Ð˜Ð»Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
/opt/etc/init.d/S99xray-telegram-manager stop
rm -rf /opt/etc/xray-manager
rm -f /opt/etc/init.d/S99xray-telegram-manager
```

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
â”œâ”€â”€ config/          # Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹
â”œâ”€â”€ telegram/        # Telegram bot Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ
â”œâ”€â”€ server/          # Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð°Ð¼Ð¸ Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ°Ð¼Ð¸
â”œâ”€â”€ xray/            # Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹ xray
â”œâ”€â”€ logger/          # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
â”œâ”€â”€ scripts/         # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð¸ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
â””â”€â”€ main.go          # ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
```

## Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

- `github.com/go-telegram/bot` - ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ð°Ñ Ð²Ð½ÐµÑˆÐ½ÑÑ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ Ð´Ð»Ñ Telegram API

## Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

MIT License - ÑÐ¼. Ñ„Ð°Ð¹Ð» [LICENSE](LICENSE)